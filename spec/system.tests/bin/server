class TimeServer
  require 'drb/observer'
  include DRb::DRbObservable

  def get_current_time
    return Time.now
  end

  def progress
    3.times do 
      changed
      notify_observers Time.now.to_s
    end		    
  end   
end

FRONT_OBJECT=TimeServer.new

$SAFE = 0

require 'drb/drb'

port = 9999

uri="druby://127.0.0.1:#{port}"

DRb.start_service(uri, FRONT_OBJECT)

puts "Server has started on port <#{port}>"

# Wait for the drb server thread to finish before exiting.
DRb.thread.join